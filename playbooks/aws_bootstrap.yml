
- hosts: localhost
  roles:
    - { role: mapr-aws-bootstrap,
        ec2_keypair: 'vgonzalez_keypair',
        ec2_security_group: 'sg-b7e12fde',
        ec2_region: 'us-east-1',
        ec2_zone: 'us-east-1b', # use with subnet-8f999ba7
        ec2_image: 'ami-8997afe0',
        #ec2_image: 'ami-76817c1e',
        vpc_subnet: 'subnet-9bfae2ef',
        ec2_name_tag: '{{mapr_cluster_name}}',
        edge_node_count: 1,
        edge_node_type: 'c3.2xlarge',
        edge_node_price: 0.10,
        cluster_node_count: 3, # You can choose 3 or 6 nodes.
        cluster_node_type: 'c3.2xlarge',
        cluster_node_price: 0.10,
        ec2_wait_timeout: 1200,
        root_device_path: '/dev/sda',
        ssh_user: 'root'
    }

# NB: instances is dynamically created in the bootstrap play above.
# don't look for it in the inventory file.
- hosts: instances
  user: '{{ssh_user}}'
  sudo: yes
  tasks:
    - name: extend root FS to fill volume in case it's larger than the base AMI
      command: resize2fs /dev/sda
